```markdown
# Autogen README Generator

This project automates the generation and publishing of README.md files for Python code using Autogen and Playwright. It leverages a language model to create the README content and then uses Playwright to automatically publish the README to a specified GitHub repository.

## Key Features

-   **Automated README Generation:** Uses Autogen and a specified language model (Gemini) to generate README.md content based on the provided Python code.
-   **GitHub Publishing:** Employs Playwright to automate the process of logging into GitHub, navigating to a specified repository, creating a new file (README.md), and committing the changes.

## Prerequisites

-   **Python 3.7+**
-   **Installed packages:**

    ```bash
    pip install autogen_core playwright python-dotenv autogen-ext
    playwright install chromium
    ```

-   **.env File:** Create a `.env` file in the root directory with the following variables:

    ```
    GITHUB_EMAIL=<your_github_email>
    GITHUB_PASSWORD=<your_github_password>
    GITHUB_REPO_URL=<your_github_repo_url>
    GEMINI_API_KEY=<your_gemini_api_key>
    ```

    **Important:** Ensure the GitHub account has 2FA disabled or be prepared to manually complete 2FA during execution.

## Setup

1.  **Install Dependencies:** Run `pip install autogen_core playwright python-dotenv autogen-ext` to install the required Python packages.
2.  **Install Chromium:**  Run `playwright install chromium` to install the Chromium browser needed by Playwright.
3.  **Configure .env File:** Create a `.env` file with your GitHub credentials and Gemini API key.  Replace the placeholder values with your actual credentials.

## How to Use

1.  **Run the Script:** Execute the Python script.

    ```bash
    python your_script_name.py
    ```

2.  **Input Folder Path and File Name:** The script will prompt you to enter the folder path and the name of the Python file for which you want to generate a README.
3.  **Manual 2FA Verification (if applicable):** If your GitHub account has 2FA enabled, the script will pause and prompt you to manually complete the 2FA verification in the opened browser window.  Press Enter in the terminal after completing the verification.
4.  **Submission and Browser Closure:** The script will then automate the creation of the README.md file in your specified GitHub repository. After submission, the script will pause. Press enter to close the browser.

## Code Explanation

### `generate_readme_content(model_client, code_content)`

This function takes a language model client and the Python code content as input. It constructs a prompt asking the model to generate a clear and concise README.md file.  The function returns the generated README content.

```python
async def generate_readme_content(model_client, code_content):
    prompt = (
        "## This file is automatically generated by Autogen\n"
        "Please write a clear README.md file in English for the following Python code. "
        "Include well-structured headings, bullet points, and use code blocks to enhance readability, only key point and using method of code:\n\n"
        f"````python\n{code_content}\n````"
    )

    response = await model_client.create([UserMessage(content=prompt, source="user")])
    readme_content = response.content

    return readme_content
```

### `publish_to_github(md_content, file_name="README.md")`

This function automates the process of publishing the generated README content to a GitHub repository.

-   It launches a Chromium browser using Playwright.
-   -   It navigates to the GitHub login page and logs in using the credentials from the `.env` file.
    -   -   **Important:** It includes a pause for manual 2FA verification if needed.
        -   -   It navigates to the specified repository and then to the `autogen/post` folder.
            -   -   It clicks the "Add file" button and selects "Create new file."
                -   -   It fills the file name input with "README.md" and types the generated README content into the file editor.
                    -   -   It commits the changes.
                        -   -   It pauses before closing the browser, allowing the user to review the changes.
                         
                            -   ```python
                                async def publish_to_github(md_content, file_name="README.md"):
                                    async with async_playwright() as p:
                                        browser = await p.chromium.launch(headless=False)
                                        page = await browser.new_page()

                                        # GitHub login
                                        await page.goto("https://github.com/login")
                                        await page.fill("#login_field", GITHUB_EMAIL)
                                        await page.fill("#password", GITHUB_PASSWORD)
                                        await page.press("#password", "Enter")

                                        print("Complete 2FA verification manually:")
                                        input("Press Enter after completing 2FA verification...")
                                        await page.wait_for_timeout(3000)

                                        # Navigate to specified repository
                                        await page.goto(GITHUB_REPO_URL)
                                        await page.wait_for_timeout(2000)
                                        print("Entered GitHub Repo")

                                        # Navigate to autogen folder
                                        await page.goto(f"{GITHUB_REPO_URL}/tree/main/autogen/post")
                                        await page.wait_for_timeout(3000)

                                        # Click to add new file
                                        await page.click("button:has-text('Add file')")
                                        await page.click("a:has-text('Create new file')")

                                        # Fill file name and content
                                        await page.fill("input[aria-label='File name']", file_name)
                                        await page.wait_for_selector("div.cm-content[contenteditable='true']")
                                        await page.locator("div.cm-content[contenteditable='true']").click()
                                        await page.keyboard.type(md_content, delay=50)

                                        # Commit file
                                        await page.click("button:has-text('Commit changes...')")
                                        await page.click("button[aria-disabled='false']:has-text('Commit changes')")

                                        input("Submission completed. Press Enter to close the browser...")
                                        await browser.close()
                                ```

                                ### `main()`

                                This is the main function that orchestrates the entire process.  It reads the Gemini API key from the `.env` file, initializes the language model client, reads the Python code from the specified file, generates the README content, and publishes it to GitHub.

                                ```python
                                async def main():
                                    gemini_api_key = os.getenv("GEMINI_API_KEY")
                                    if not gemini_api_key:
                                        print("Please check the GEMINI_API_KEY in the .env file.")
                                        return

                                    model_client = OpenAIChatCompletionClient(
                                        model="gemini-2.0-flash",
                                        api_key=gemini_api_key,
                                    )

                                    # Read content from a Python file
                                    folder_path = input("Enter the folder path: ").strip()
                                    file_name = input("Enter the Python file name (e.g. main.py): ").strip()
                                    file_path = os.path.join(folder_path, file_name)

                                    if not os.path.isfile(file_path):
                                        print(f"File not found: {file_path}")
                                        return

                                    with open(file_path, "r", encoding="utf-8") as file:
                                        code_content = file.read()

                                    readme_content = await generate_readme_content(model_client, code_content)
                                    await publish_to_github(readme_content)
                                ```

                                ## Disclaimer

                                This script automates interactions with the GitHub website. Use it responsibly and in accordance with GitHub's terms of service.  Be mindful of rate limits and avoid excessive use. Also, remember to manually complete 2FA if your account has it enabled, as this script does not automatically handle 2FA.
                                ```
